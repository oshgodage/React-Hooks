"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("react")),t=e=>"checkbox"===e.type,n=e=>null==e;const s=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),u=e=>e.substring(0,e.search(/.\d/))||e,i=e=>e.filter(Boolean),a=e=>void 0===e,l=(e={},r,t)=>{const s=i(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return a(s)||s===e?a(e[r])?t:e[r]:s};const o="blur",f="change",d="onBlur",b="onChange",y="onSubmit",g="onTouched",m="all",h="max",v="min",x="maxLength",p="minLength",A="pattern",O="required",j="validate";var k=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const V=r.createContext(null);V.displayName="RHFContext";const R=()=>r.useContext(V);var F=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==m&&(t.current[r]=!s||m),n&&(n.current[r]=!0),e[r]}}):r,S=e=>c(e)&&!Object.keys(e).length,w=(e,r,t)=>S(e)||Object.keys(e).length>=Object.keys(r).length||Object.keys(e).find(e=>r[e]===(!t||m)),_="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const C=_?"Proxy"in window:"undefined"!=typeof Proxy;function D(e){const t=R(),{formStateRef:n,formStateSubjectRef:s,readFormStateRef:c}=e&&e.control||t.control,[u,i]=r.useState(n.current),a=r.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return r.useEffect(()=>{const e=s.current.subscribe({next:e=>{w(e,a.current)&&i(Object.assign(Object.assign({},n.current),e))}});return()=>e.unsubscribe()},[]),F(C,u,c,a,!1)}function E({name:e,rules:n,defaultValue:s,control:i,shouldUnregister:d}){const b=R(),{defaultValuesRef:y,register:g,fieldsRef:m,unregister:h,fieldArrayNamesRef:v,controllerSubjectRef:x,shouldUnmountUnregister:p}=i||b.control,{onChange:A,onBlur:O,ref:j}=g(e,n),[k,V]=r.useState(a(l(m.current,e)._f.value)||((e,r)=>[...e].some(e=>u(r)===e))(v.current,e)?a(s)?l(y.current,e):s:l(m.current,e)._f.value),F=D({control:i||b.control});return l(m.current,e)._f.value=k,r.useEffect(()=>{const r=x.current.subscribe({next:r=>(!r.name||e===r.name)&&V(l(r.values,e))});return j({target:k}),()=>{r.unsubscribe(),(p||d)&&h(e)}},[e]),{field:{onChange:r=>{const n=(e=>c(e)&&e.target?t(e.target)?e.target.checked:e.target.value:e)(r);V(n),A({target:{value:n,name:e},type:f})},onBlur:()=>{O({target:{name:e},type:o})},name:e,value:k,ref:j},formState:F,fieldState:Object.defineProperties({},{invalid:{get:()=>!!l(F.errors,e)},isDirty:{get:()=>!!l(F.dirtyFields,e)},isTouched:{get:()=>!!l(F.touchedFields,e)},error:{get:()=>l(F.errors,e)}})}}var B=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},N=e=>/^\w*$/.test(e),$=e=>i(e.replace(/["|']|\]/g,"").split(/\.|\[/));function M(e,r,t){let n=-1;const s=N(r)?[r]:$(r),u=s.length,i=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==i){const t=e[r];u=c(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const I=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=l(e,n);if(t){const e=t._f,n=k(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&a(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else c(n)&&I(n,r)}}},P=(e,r={current:{}},t={})=>{for(const n in e.current){const s=e.current[n];if(s){const e=s._f,c=k(s,"_f");M(t,n,e?e.ref.disabled||e.refs&&e.refs.every(e=>e.disabled)?void 0:e.value:Array.isArray(s)?[]:{}),c&&P({current:c},r,t[n])}}return Object.assign(Object.assign({},r.current),t)};var T=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},U=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||T()},e)),W=e=>n(e)||!s(e);function L(e,t,n){if(W(e)||W(t)||e instanceof Date||t instanceof Date)return e===t;if(!r.isValidElement(e)){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const s of r){const r=e[s];if(!n||"ref"!==s){const e=t[s];if((c(r)||Array.isArray(r))&&(c(e)||Array.isArray(e))?!L(r,e,n):r!==e)return!1}}}return!0}function q(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],q(e[c][n],l(r[c]||{},n,[]),t[c][n],t[c],n)):L(l(r[c]||{},n),e[c][n])?M(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var H=(e,r,t)=>function e(r,t){if(W(r)||W(t))return t;for(const n in t){const s=r[n],u=t[n];try{r[n]=c(s)&&c(u)||Array.isArray(s)&&Array.isArray(u)?e(s,u):u}catch(e){}}return r}(q(e,r,t.slice(0,e.length)),q(r,e,t.slice(0,e.length)));function z(e,r){return[...e,...Array.isArray(r)?r:[r]]}var G=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function J(e,r,t){return[...e.slice(0,r),...Array.isArray(t)?t:[t],...e.slice(r)]}var K=(e,r,t)=>Array.isArray(e)?(a(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function Q(e,r){return[...Array.isArray(r)?r:[r],...e]}var X=(e,r)=>a(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return i(n).length?n:[]}(e,(Array.isArray(r)?r:[r]).sort((e,r)=>e-r)),Y=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},Z=e=>"boolean"==typeof e;function ee(e,r){const t=N(r)?[r]:$(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=a(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const i=t.slice(0,-(r+1)),a=i.length-1;for(r>0&&(u=e);++s<i.length;){const r=i[s];n=n?n[r]:e[r],a===s&&(c(n)&&S(n)||Array.isArray(n)&&!n.filter(e=>c(e)&&!S(e)||Z(e)).length)&&(u?delete u[r]:delete e[r]),u=n}}return e}function re(e,r){const t={};for(const n of e){const e=l(r,n);e&&(N(n)?t[n]=e._f:M(t,n,e._f))}return t}var te=e=>"file"===e.type,ne=e=>"select-multiple"===e.type,se=e=>"radio"===e.type;const ce={value:!1,isValid:!1},ue={value:!0,isValid:!0};var ie=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!a(e[0].attributes.value)?a(e[0].value)||""===e[0].value?ue:{value:e[0].value,isValid:!0}:ue:ce}return ce};const ae={isValid:!1,value:null};var le=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,ae):ae;function oe(e){if(e&&e._f){const n=e._f.ref;if(n.disabled)return;return te(n)?n.files:se(n)?le(e._f.refs).value:ne(n)?(r=n.options,[...r].filter(({selected:e})=>e).map(({value:e})=>e)):t(n)?ie(e._f.refs).value:((e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>r?""===e?NaN:+e:t?new Date(e):n?n(e):e)(a(n.value)?e._f.ref.value:n.value,e._f)}var r}var fe=e=>e&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),de=e=>"function"==typeof e,be=e=>"string"==typeof e,ye=e=>be(e)||r.isValidElement(e),ge=e=>e instanceof RegExp;function me(e,r,t="validate"){if(ye(e)||Z(e)&&!e)return{type:t,message:ye(e)?e:"",ref:r}}var he=e=>c(e)&&!ge(e)?e:{value:e,message:""},ve=async({_f:{ref:e,refs:r,required:s,maxLength:u,minLength:i,min:a,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:y}},g)=>{const m={},k=se(e),V=t(e),R=k||V,F=(y||te(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,w=B.bind(null,d,g,m),_=(r,t,n,s=x,c=p)=>{const u=r?t:n;m[d]=Object.assign({type:r?s:c,message:u,ref:e},w(r?s:c,u))};if(s&&(!k&&!V&&(F||n(b))||Z(b)&&!b||V&&!ie(r).isValid||k&&!le(r).isValid)){const{value:t,message:n}=ye(s)?{value:!!s,message:s}:he(s);if(t&&(m[d]=Object.assign({type:O,message:n,ref:R?(r||[])[0]||{}:e},w(O,n)),!g))return m}if(!(n(a)&&n(l)||""===b)){let r,t;const s=he(l),c=he(a);if(isNaN(b)){const n=e.valueAsDate||new Date(b);be(s.value)&&(r=n>new Date(s.value)),be(c.value)&&(t=n<new Date(c.value))}else{const u=e.valueAsNumber||parseFloat(b);n(s.value)||(r=u>s.value),n(c.value)||(t=u<c.value)}if((r||t)&&(_(!!r,s.message,c.message,h,v),!g))return m}if(be(b)&&!F&&(u||i)){const e=he(u),r=he(i),t=!n(e.value)&&b.length>e.value,s=!n(r.value)&&b.length<r.value;if((t||s)&&(_(t,e.message,r.message),!g))return m}if(be(b)&&o&&!F){const{value:r,message:t}=he(o);if(ge(r)&&!b.match(r)&&(m[d]=Object.assign({type:A,message:t,ref:e},w(A,t)),!g))return m}if(f){const t=R&&r?r[0]:e;if(de(f)){const e=me(await f(b),t);if(e&&(m[d]=Object.assign(Object.assign({},e),w(j,e.message)),!g))return m}else if(c(f)){let e={};for(const[r,n]of Object.entries(f)){if(!S(e)&&!g)break;const s=me(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),w(r,s.message)),g&&(m[d]=e))}if(!S(e)&&(m[d]=Object.assign({ref:t},e),!g))return m}}return m},xe=e=>({isOnSubmit:!e||e===y,isOnBlur:e===d,isOnChange:e===b,isOnAll:e===m,isOnTouch:e===g}),pe=e=>e instanceof HTMLElement;class Ae{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class Oe{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class je{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new Ae,t=new Oe(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const ke="undefined"==typeof window;exports.Controller=e=>e.render(E(e)),exports.FormProvider=e=>r.createElement(V.Provider,{value:k(e,"children")},e.children),exports.appendErrors=B,exports.get=l,exports.set=M,exports.useController=E,exports.useFieldArray=({control:e,name:t,keyName:n="id",shouldUnregister:s})=>{const c=R(),o=r.useRef(""),{isWatchAllRef:f,watchFieldsRef:d,getIsDirty:b,watchSubjectRef:y,fieldArraySubjectRef:g,fieldArrayNamesRef:m,fieldsRef:h,defaultValuesRef:v,formStateRef:x,formStateSubjectRef:p,readFormStateRef:A,validFieldsRef:O,fieldsWithValidationRef:j,fieldArrayDefaultValuesRef:V,unregister:F,shouldUnmountUnregister:S}=e||c.control,[w,_]=r.useState(U(l(V.current,u(t))?l(V.current,t,[]):l(v.current,t,[]),n));M(V.current,t,[...w]),m.current.add(t);const C=e=>e.map(e=>k(e||{},n)),D=()=>{const e=l(P(h,v),t,[]);return U(l(V.current,t,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),n)},E=(e,r)=>r?a(r.focusIndex)?r.focusName?r.focusName:r.shouldFocus?`${t}.${e}`:"":`${t}.${r.focusIndex}`:`${t}.${e}`,B=(e=[])=>_(U(e,n)),N=e=>!i(l(e,t,[])).length&&ee(e,t),$=(e,r,n=[],s=!0)=>{if(l(h.current,t)){const n=e(l(h.current,t),r.argA,r.argB);s&&M(h.current,t,n)}if(Array.isArray(l(x.current.errors,t))){const n=e(l(x.current.errors,t),r.argA,r.argB);s&&M(x.current.errors,t,n),N(x.current.errors)}if(A.current.touchedFields&&l(x.current.touchedFields,t)){const n=e(l(x.current.touchedFields,t),r.argA,r.argB);s&&M(x.current.touchedFields,t,n),N(x.current.touchedFields)}(A.current.dirtyFields||A.current.isDirty)&&(M(x.current.dirtyFields,t,H(C(n),l(v.current,t,[]),l(x.current.dirtyFields,t,[]))),(e=>{e&&M(x.current.dirtyFields,t,H(C(e),l(v.current,t,[]),l(x.current.dirtyFields,t,[])))})(n),N(x.current.dirtyFields)),A.current.isValid&&(M(O.current,t,e(l(O.current,t,[]),r.argA)),N(O.current),M(j.current,t,e(l(j.current,t,[]),r.argA)),N(j.current)),p.current.next({isDirty:b(t,C(n)),errors:x.current.errors,isValid:x.current.isValid})},T=(e,r=0,n="")=>e.forEach((e,s)=>!W(e)&&Object.entries(e).forEach(([e,c])=>{const u=`${n||t}.${n?s:r+s}.${e}`;Array.isArray(c)?T(c,s,u):M(h.current,u,{_f:{ref:{name:u},name:u,value:c}})}));return r.useEffect(()=>{if(f.current)p.current.next({});else for(const e of d.current)if(t.startsWith(e)){p.current.next({});break}y.current.next({name:t,value:l(P(h,v),t,[])}),o.current&&I(h.current,e=>e.startsWith(o.current)),o.current="",g.current.next({name:t,fields:C([...w])})},[w,t]),r.useEffect(()=>{const e=g.current.subscribe({next({name:e,fields:r,isReset:n}){n&&(ee(h.current,e||t),e?M(V.current,e,r):V.current=r,B(l(V.current,t)))}});return!l(h.current,t)&&M(h.current,t,[]),()=>{e.unsubscribe(),(S||s)&&F(t)}},[]),{swap:r.useCallback((e,r)=>{const t=D();Y(t,e,r),$(Y,{argA:e,argB:r},t,!1),B(t)},[t]),move:r.useCallback((e,r)=>{const t=D();K(t,e,r),B(t),$(K,{argA:e,argB:r},t,!1)},[t]),prepend:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=Q(D(),t);B(n),$(Q,{argA:G(e)},n),T(t),o.current=E(0,r)},[t]),append:r.useCallback((e,r)=>{const t=Array.isArray(e)?e:[e],n=z(D(),t),s=n.length-t.length;B(n),$(z,{argA:G(e)},n,!1),T(t,s),o.current=E(s,r)},[t]),remove:r.useCallback(e=>{const r=X(D(),e);(e=>{(Array.isArray(e)?e:[e]).forEach(e=>M(h.current,`${t}${a(e)?"":"."+e}`,a(e)?[]:void 0))})(e),B(r),$(X,{argA:e},r)},[t]),insert:r.useCallback((e,r,t)=>{const n=Array.isArray(r)?r:[r],s=J(D(),e,n);B(s),$(J,{argA:e,argB:G(r)},s),T(n,e),o.current=E(e,t)},[t]),fields:w}},exports.useForm=function({mode:e=y,reValidateMode:s=b,resolver:c,context:f,defaultValues:d={},shouldFocusError:g=!0,shouldUnregister:h=!1,criteriaMode:v}={}){const x=r.useRef({}),p=r.useRef(new Set),A=r.useRef(new je),O=r.useRef(new je),j=r.useRef(new je),V=r.useRef(new je),R=r.useRef({}),D=r.useRef(new Set),E=r.useRef(!1),B=r.useRef({}),N=r.useRef({}),$=r.useRef(d),T=r.useRef(!1),U=r.useRef(f),W=r.useRef(c),q=r.useRef(new Set),z=xe(e),G=v===m,[J,K]=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!z.isOnSubmit,errors:{}}),Q=r.useRef({isDirty:!C,dirtyFields:!C,touchedFields:!C,isValidating:!C,isValid:!C,errors:!C}),X=r.useRef(J);U.current=f,W.current=c;const Y=()=>X.current.isValid=L(N.current,B.current)&&S(X.current.errors),Z=r.useCallback((e,r,t=!1,s={},c,u)=>{const i=l(X.current.errors,e);let o=t||!L(i,r,!0)||Q.current.isValid&&a(r)&&l(B.current,e)&&!l(N.current,e);if(r?(ee(N.current,e),o=o||!i||!L(i,r,!0),M(X.current.errors,e,r)):((l(B.current,e)||W.current)&&(M(N.current,e,!0),o=o||i),ee(X.current.errors,e)),o&&!n(t)||!S(s)||u){const e=Object.assign(Object.assign({},s),{isValid:W.current?!!c:Y(),errors:X.current.errors});X.current=Object.assign(Object.assign({},X.current),e),A.current.next(u?{}:e)}A.current.next({isValidating:!1})},[]),ce=r.useCallback((e,r,s={},c,u)=>{u&&_e(e);const i=l(x.current,e,{})._f;if(i){const u=_&&pe(i.ref)&&n(r)?"":r;if(i.value=r,se(i.ref)?(i.refs||[]).forEach(e=>e.checked=e.value===u):te(i.ref)&&!be(u)?i.ref.files=u:ne(i.ref)?[...i.ref.options].forEach(e=>e.selected=u.includes(e.value)):t(i.ref)&&i.refs?i.refs.length>1?i.refs.forEach(e=>e.checked=Array.isArray(u)?!!u.find(r=>r===e.value):u===e.value):i.refs[0].checked=!!u:i.ref.value=u,c){const t=P(x);M(t,e,r),j.current.next({values:Object.assign(Object.assign({},$.current),t),name:e})}s.shouldDirty&&ie(e,u),s.shouldValidate&&ge(e)}},[]),ue=r.useCallback((e,r)=>{const t=P(x);return e&&r&&M(t,e,r),!L(t,$.current)},[]),ie=r.useCallback((e,r,t=!0)=>{if(Q.current.isDirty||Q.current.dirtyFields){const n=!L(l($.current,e),r),s=l(X.current.dirtyFields,e),c=X.current.isDirty;n?M(X.current.dirtyFields,e,!0):ee(X.current.dirtyFields,e),X.current.isDirty=ue();const u={isDirty:X.current.isDirty,dirtyFields:X.current.dirtyFields},i=Q.current.isDirty&&c!==u.isDirty||Q.current.dirtyFields&&s!==l(X.current.dirtyFields,e);return i&&t&&A.current.next(u),i?u:{}}return{}},[]),ae=r.useCallback(async(e,r)=>{const t=(await ve(l(x.current,e),G))[e];return Z(e,t,r),a(t)},[G]),le=r.useCallback(async(e,r=[])=>{const{errors:t}=await W.current(P(x,$),U.current,{criteriaMode:v,names:r,fields:re(p.current,x.current)});for(const r of e){const e=l(t,r);e?M(X.current.errors,r,e):ee(X.current.errors,r)}return t},[v]),ye=async e=>{for(const r in e){const t=e[r];if(t){const e=t._f,r=k(t,"_f");if(e){const r=await ve(t,G);r[e.name]?(M(X.current.errors,e.name,r[e.name]),ee(N.current,e.name)):l(B.current,e.name)&&(M(N.current,e.name,!0),ee(X.current.errors,e.name))}r&&await ye(r)}}},ge=r.useCallback(async e=>{const r=a(e)?Object.keys(x.current):Array.isArray(e)?e:[e];let t;A.current.next({isValidating:!0}),W.current?t=S(await le(r,a(e)?void 0:r)):a(e)?await ye(x.current):await Promise.all(r.map(async e=>await ae(e,null))),A.current.next({errors:X.current.errors,isValidating:!1,isValid:W.current?t:Y()})},[le,ae]),me=r.useCallback((e,r,t)=>Object.entries(r).forEach(([r,n])=>{const s=`${e}.${r}`,c=l(x.current,s);c&&!c._f?me(s,n,t):ce(s,n,t,!0,!c)}),[ge]),he=e=>T.current||D.current.has(e)||D.current.has((e.match(/\w+/)||[])[0]),Ae=(e,r,t,n)=>{const s=l(x.current,e),c=a(s._f.value)?l($.current,e):s._f.value;return s&&!a(c)&&(t&&t.defaultChecked?s._f.value=oe(s):ce(e,c)),(!a(c)||n)&&fe(r)&&!z.isOnSubmit&&s&&Q.current.isValid&&ve(s,G).then(r=>{S(r)?M(N.current,e,!0):ee(N.current,e),X.current.isValid!==Y()&&K(Object.assign(Object.assign({},X.current),{isValid:Y()}))}),c},Oe=r.useCallback(async({type:e,target:r,target:{value:n,type:c}})=>{let i,f,d=r.name;const b=l(x.current,d);if(b){let y=c?oe(b):void 0;y=a(y)?n:y;const g=e===o,{isOnBlur:m,isOnChange:h}=xe(s),p=!fe(b._f)&&!W.current||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||u):(i?s:e)?!u:!(i?c:r)||u))(Object.assign({isBlurEvent:g,isTouched:!!l(X.current.touchedFields,d),isSubmitted:X.current.isSubmitted,isReValidateOnBlur:m,isReValidateOnChange:h},z)),j=!g&&he(d);a(y)||(b._f.value=y);const k=ie(d,b._f.value,!1);g&&!l(X.current.touchedFields,d)&&(M(X.current.touchedFields,d,!0),Q.current.touchedFields&&(k.touchedFields=X.current.touchedFields));let V=!S(k)||j;if(p)return!g&&O.current.next({name:d,type:e,value:y}),V&&A.current.next(j?{}:k);if(A.current.next({isValidating:!0}),W.current){const{errors:e}=await W.current(P(x,$),U.current,{criteriaMode:v,fields:re([d],x.current),names:[d]}),n=X.current.isValid;if(i=l(e,d),t(r)&&!i){const r=u(d),t=l(e,r,{});t.type&&t.message&&(i=t),(t||l(X.current.errors,r))&&(d=r)}f=S(e),n!==f&&(V=!0)}else i=(await ve(b,G))[d];!g&&O.current.next({name:d,type:e,value:y}),Z(d,i,V,k,f,j)}},[]),Ve=e=>{const r=E.current?P(x,$):$.current;return a(e)?r:be(e)?l(r,e):e.map(e=>l(r,e))},Re=r.useCallback(async(e={})=>{const r=X.current.isValid;if(c){const{errors:r}=await W.current(Object.assign(Object.assign({},P(x,$)),e),U.current,{criteriaMode:v,fields:re(p.current,x.current)});X.current.isValid=S(r)}else Y();r!==X.current.isValid&&A.current.next({isValid:X.current.isValid})},[v]),Fe=r.useCallback((e,r,t)=>{const n=Array.isArray(e),s=E.current?Ve():a(r)?$.current:n?r||{}:{[e]:r};if(a(e))return t&&(T.current=!0),s;const c=[];for(const r of n?e:[e])t&&D.current.add(r),c.push(l(s,r));return n?c:c[0]},[]),Se=(e,r={},t)=>{for(const n of e?Array.isArray(e)?e:[e]:Object.keys(p.current))p.current.delete(n),q.current.delete(n),l(x.current,n)&&(r.keepIsValid||(ee(B.current,n),ee(N.current,n)),!r.keepError&&ee(X.current.errors,n),!r.keepValue&&ee(x.current,n),!r.keepDirty&&ee(X.current.dirtyFields,n),!r.keepTouched&&ee(X.current.touchedFields,n),!r.keepDefaultValue&&ee($.current,n),t&&O.current.next({name:n}));t&&(A.current.next(Object.assign(Object.assign(Object.assign({},X.current),r.keepDirty?{isDirty:ue()}:{}),W.current?{}:{isValid:Y()})),!r.keepIsValid&&Re())},we=(e,r,n)=>{let s=l(x.current,e);if(s){const c=(e=>se(e)||t(e))(r);if(r===s._f.ref||_&&pe(s._f.ref)&&!pe(r)||c&&Array.isArray(s._f.refs)&&i(s._f.refs).find(e=>e===r))return;s={_f:c?Object.assign(Object.assign({},s._f),{refs:[...i(s._f.refs||[]).filter(e=>pe(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},s._f),{ref:r})},M(x.current,e,s);const u=Ae(e,n,r,!0);(c&&Array.isArray(u)?!L(l(x.current,e)._f.value,u):a(l(x.current,e)._f.value))&&(l(x.current,e)._f.value=oe(l(x.current,e)))}},_e=r.useCallback((e,r)=>{const t=!l(x.current,e);return M(x.current,e,{_f:Object.assign(Object.assign(Object.assign({},t?{ref:{name:e}}:Object.assign({ref:(l(x.current,e)._f||{}).ref},l(x.current,e)._f)),{name:e}),r)}),fe(r)&&M(B.current,e,!0),p.current.add(e),t&&Ae(e,r),ke?{name:e}:{name:e,onChange:Oe,onBlur:Oe,ref:t=>t?we(e,t,r):(h||r&&r.shouldUnregister)&&Se(e)}},[$.current]),Ce=r.useCallback((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=Object.assign(Object.assign({},$.current),P(x,$));A.current.next({isSubmitting:!0});try{if(W.current){const{errors:e,values:r}=await W.current(n,U.current,{criteriaMode:v,fields:re(p.current,x.current)});X.current.errors=e,n=r}else await ye(x.current);S(X.current.errors)&&Object.keys(X.current.errors).every(e=>l(n,e))?(A.current.next({errors:{},isSubmitting:!0}),await e(n,t)):(r&&await r(X.current.errors,t),g&&I(x.current,e=>l(X.current.errors,e),p.current))}finally{X.current.isSubmitted=!0,A.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:S(X.current.errors),submitCount:X.current.submitCount+1,errors:X.current.errors})}},[g,G,v]),De=r.useCallback(({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepIsValid:s,keepSubmitCount:c},u)=>{s||(N.current={},B.current={}),D.current=new Set,T.current=!1,A.current.next({submitCount:c?X.current.submitCount:0,isDirty:r?X.current.isDirty:!(!u||!ue()),isSubmitted:!!t&&X.current.isSubmitted,isValid:s?X.current.isValid:!!Re(u),dirtyFields:r?X.current.dirtyFields:{},touchedFields:n?X.current.touchedFields:{},errors:e?X.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},[]);return r.useEffect(()=>{E.current=!0;const e=A.current.subscribe({next(e={}){w(e,Q.current,!0)&&(X.current=Object.assign(Object.assign({},X.current),e),K(X.current))}}),r=V.current.subscribe({next(e){if(e.fields&&e.name&&Q.current.isValid){const r=P(x);M(r,e.name,e.fields),Re(r)}}});return W.current&&Q.current.isValid&&Re(),()=>{O.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}},[]),{control:r.useMemo(()=>({register:_e,isWatchAllRef:T,watchFieldsRef:D,getIsDirty:ue,formStateSubjectRef:A,fieldArraySubjectRef:V,controllerSubjectRef:j,watchSubjectRef:O,watchInternal:Fe,fieldsRef:x,validFieldsRef:N,fieldsWithValidationRef:B,fieldArrayNamesRef:q,readFormStateRef:Q,formStateRef:X,defaultValuesRef:$,fieldArrayDefaultValuesRef:R,unregister:Se,shouldUnmountUnregister:h}),[]),formState:F(C,J,Q),trigger:ge,register:_e,handleSubmit:Ce,watch:r.useCallback((e,r)=>de(e)?O.current.subscribe({next:t=>e(Fe(void 0,r),t)}):Fe(e,r,!0),[]),setValue:r.useCallback((e,r,t={})=>{E.current=!0;const n=l(x.current,e),s=q.current.has(e);s&&(V.current.next({fields:r,name:e,isReset:!0}),(Q.current.isDirty||Q.current.dirtyFields)&&t.shouldDirty&&(M(X.current.dirtyFields,e,H(r,l($.current,e,[]),l(X.current.dirtyFields,e,[]))),A.current.next({dirtyFields:X.current.dirtyFields,isDirty:ue(e,r)})),!r.length&&M(x.current,e,[])&&M(R.current,e,[])),n&&!n._f||s?me(e,r,s?{}:t):ce(e,r,t,!0,!n),he(e)&&A.current.next({}),O.current.next({name:e,value:r})},[me]),getValues:r.useCallback(Ve,[]),reset:r.useCallback((e,r={})=>{const t=e||$.current;if(_&&!r.keepValues)for(const e of p.current){const r=l(x.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;if(pe(e))try{e.closest("form").reset();break}catch(e){}}}!r.keepDefaultValues&&($.current=Object.assign({},t)),r.keepValues||(x.current={},j.current.next({values:Object.assign({},t)}),O.current.next({value:Object.assign({},t)}),V.current.next({fields:Object.assign({},t),isReset:!0})),De(r,e)},[]),clearErrors:r.useCallback(e=>{e&&(Array.isArray(e)?e:[e]).forEach(e=>ee(X.current.errors,e)),A.current.next({errors:e?X.current.errors:{}})},[]),unregister:r.useCallback((e,r={})=>Se(e,r,!0),[]),setError:r.useCallback((e,r,t)=>{const n=((l(x.current,e)||{_f:{}})._f||{}).ref;M(X.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),A.current.next({errors:X.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[]),setFocus:r.useCallback(e=>l(x.current,e)._f.ref.focus(),[])}},exports.useFormContext=R,exports.useFormState=D,exports.useWatch=function(e){const{control:t,name:n,defaultValue:s}=e||{},c=R(),u=r.useRef(n);u.current=n;const{watchInternal:i,watchSubjectRef:l}=t||c.control,[o,f]=r.useState(a(s)?i(n):s);return r.useEffect(()=>{i(n);const e=l.current.subscribe({next:({name:e,value:r})=>(!u.current||!e||(Array.isArray(u.current)?u.current:[u.current]).some(r=>e&&r&&(r.startsWith(e)||e.startsWith(r))))&&f(be(e)&&u.current===e&&!a(r)?r:i(u.current,s))});return()=>e.unsubscribe()},[]),o};
//# sourceMappingURL=index.cjs.js.map
